walinuxagent (2.0.12-0ubuntu1) vivid; urgency=medium

  * New upstream release.
  * Added debian/watch for easier maintenance.
  * Fix regression of missing dataloss warning by adding systemd unit file.

 -- Ben Howard <ben.howard@ubuntu.com>  Wed, 25 Mar 2015 11:04:05 -0600

walinuxagent (2.0.8-0ubuntu7) vivid; urgency=medium

  * Added /lib/udev/rules.d/66-azure-storage.rules: create symlinks for
    /dev/disk/azure/{root,resource} to correctly identify disks
    (LP: #1411582).

 -- Ben Howard <ben.howard@ubuntu.com>  Mon, 09 Mar 2015 06:26:48 -0600

walinuxagent (2.0.8-0ubuntu6) vivid; urgency=medium

  * Changed systemd unit file to allow for cloud-init to run first.

 -- Ben Howard <ben.howard@ubuntu.com>  Tue, 02 Dec 2014 21:53:06 -0700

walinuxagent (2.0.8-0ubuntu5) vivid; urgency=medium

  * Changes to support systemd
    - debian/walinuxagent.service: symlink to upstream service
    - debian/rules: build with systemd
    - debain/control: added dh_python and dh_systemd to build deps

 -- Ben Howard <ben.howard@ubuntu.com>  Wed, 26 Nov 2014 11:41:59 -0700

walinuxagent (2.0.8-0ubuntu4) vivid; urgency=medium

  * Moved dependency of linux-image-extra-virtual to recommends.

 -- Ben Howard <ben.howard@ubuntu.com>  Tue, 18 Nov 2014 05:40:07 -0700

walinuxagent (2.0.8-0ubuntu3) vivid; urgency=medium

  * Changed startup ordering to on ephemeral disk warning as the warning
    is not written on first boot.

 -- Ben Howard <ben.howard@ubuntu.com>  Fri, 07 Nov 2014 07:02:18 -0700

walinuxagent (2.0.8-0ubuntu2) vivid; urgency=medium

  * Add upstart job to add "readme" on Azure ephemeral disk (LP: #1382257).

 -- Ben Howard <ben.howard@ubuntu.com>  Thu, 06 Nov 2014 16:33:42 -0700

walinuxagent (2.0.8-0ubuntu1) utopic; urgency=medium

  * New upstream release (LP: #1356479).
    - Fixed issue of reporting SSH keys to fabric
      - wait for Cloud-init to provision the host keys
    - Multiple fixes for extension handlers
      - capture output of subprocess, prevent subprocess failure
      - prevent fabric from continuously querying host if no extensions
        are installed.

 -- Ben Howard <ben.howard@ubuntu.com>  Fri, 29 Aug 2014 10:11:12 -0600

walinuxagent (2.0.5-0ubuntu3) utopic; urgency=medium

  * Restrict builds to amd64 only (LP: #1326018).

 -- Ben Howard <ben.howard@ubuntu.com>  Tue, 03 Jun 2014 09:21:20 -0600

walinuxagent (2.0.5-0ubuntu1) utopic; urgency=medium

  * New upstream release (LP: #1321024).
    - Multiple fixes for extension handler framework
      - New logging support
      - Add state handling for each extension
      - Properly handle non-JSON extensions
      -  Several other bugfixes
    - Replace platform.* calls with DistInfo() function
    - EnvMonitor - Set SCSI I/O timeout for all attached disks
  * Packaging changes
    - Rebased Ubuntu packaging patches from 2.0.4.
    - Updated Debian standards from 3.9.4 to 3.9.5.

 -- Ben Howard <ben.howard@ubuntu.com>  Tue, 20 May 2014 08:26:50 -0600

walinuxagent (2.0.4-0ubuntu2) trusty; urgency=low

  * Fix for broken sshd configuration (LP: #1305418)
   - Change modification of sshd_config to address lack of newline at EOF

 -- Ben Howard <ben.howard@ubuntu.com>  Thu, 10 Apr 2014 14:04:44 -0600

walinuxagent (2.0.4-0ubuntu1) trusty; urgency=medium

  * Update to latest upstream version 2.0.4 (LP: #1304023).
    - Includes ability for agent injection.

 -- Ben Howard <ben.howard@ubuntu.com>  Mon, 07 Apr 2014 16:48:16 -0600

walinuxagent (2.0.3-0ubuntu2) trusty; urgency=low

  * Change /etc/dhcp/dhclient.conf 'send host-name' during post-inst to
    fix snapshotting instances (LP: #1268050).

 -- Ben Howard <ben.howard@ubuntu.com>  Tue, 18 Mar 2014 17:14:41 -0600

walinuxagent (2.0.3-0ubuntu1) trusty; urgency=low

  * Update to latest upstream version 2.0.3 (LP: #1249052).
    - use python-setuptools to do installation, dropping the {pre,post}insts.
    - dropped the walinuxagent-datasaver packages as no longer needed.
    - use packaged default configuration file by default.
  * Rebased relevant patches from 1.3.x:
    - debian/patches/disable_provisioning.patch: disable provisioning
      features infavor of WALinuxAgent cloud-init support.
    - debian/patches/disable-udev-rules.patch: disable UDEV rule mangling
  * Include default Cloud-init configuration
    - configures Cloud-init to use the default Azure Datasource.

 -- Ben Howard <ben.howard@ubuntu.com>  Fri, 14 Feb 2014 11:55:14 -0700

walinuxagent (1.3.2-0ubuntu8) trusty; urgency=low

  * debian/patches/idns_dhcp.patch: only change send-hostname in
    dhcpclient.conf when send-hostname is already in the config
    (LP: #1268050).

 -- Ben Howard <ben.howard@ubuntu.com>  Wed, 15 Jan 2014 13:02:30 -0700

walinuxagent (1.3.2-0ubuntu7) trusty; urgency=low

  * debian/rules: Update for new upstream location.
  * debian/control: Updated the standards version from 3.9.3 to 3.9.4
  * updated the description on walinuxagent-datasaver (LP: #1266545)

 -- Ben Howard <ben.howard@ubuntu.com>  Wed, 08 Jan 2014 14:11:13 -0700

walinuxagent (1.3.2-0ubuntu5) saucy; urgency=low

  * disable ephemeral disk formating by default (LP: #1231490)

 -- Ben Howard <ben.howard@ubuntu.com>  Thu, 26 Sep 2013 08:21:35 -0600

walinuxagent (1.3.2-0ubuntu4) saucy; urgency=low

  * debian/patches/shadow_permissions.patch: apply the appropriate
    permissions to /etc/shadow (LP: #1188820).
  * debian/patches/verbose_logging.patch: use the appropriate log
    faculty when using verbose logging (LP: #1193404).
  * Mark bugs fixed in 1.3.2-0ubuntu3:
    debian/patches/config_for_cloud-init.patch:
    - fix for race condition between cloud-init and waagent  (LP: #1195524)
    - mount resource disk on /mnt (LP: #1193380)
    - move walinuxagent init functionality to cloud-init (LP: #1037723)

 -- Ben Howard <ben.howard@ubuntu.com>  Tue, 23 Jul 2013 09:43:40 -0600

walinuxagent (1.3.2-0ubuntu3) saucy; urgency=low

  [ Ben Howard ]
  * debian/patches/config_for_cloud-init.patch:
    Modified configuration to disable provisioning functions.
    walinuxagent for Ubuntu should now be used with Cloud-init.
  * debian/postinst: Don't overwrite existing /etc/waagent.conf agent
    configuration on install or upgrade.
  * debian/upstart: start later in boot, avoiding race conditions
    with cloud-init.

  [ Scott Moser ]
  * debian: wrap and sort directory
  * debian/patches/no_udev_rule_removal.patch: remove 000 prefix in file
    name. No need for numbering in filenames when we have patches/series.

 -- Scott Moser <smoser@ubuntu.com>  Thu, 11 Jul 2013 17:31:05 -0400

walinuxagent (1.3.2-0ubuntu2) saucy; urgency=low

  * Added logic to prevent udev rules.d movement (LP: #1188753)

 -- Ben Howard <ben.howard@ubuntu.com>  Tue, 11 Jun 2013 14:09:58 -0600

walinuxagent (1.3.2-0ubuntu1) raring; urgency=low

  * Updated to 1.3.2 as part of Windows Azure requirement (LP: #1158465).
  * Upstream now supports packaging; incorporated upstream packaging into
    Ubuntu Packaging.

 -- Ben Howard <ben.howard@ubuntu.com>  Thu, 21 Mar 2013 12:57:08 -0600

walinuxagent (1.3-0ubuntu2) raring; urgency=low

  * Changed detection of whether or not agent is packaged to using
    dpkg command. (LP: #1111690)

 -- Ben Howard <ben.howard@ubuntu.com>  Thu, 31 Jan 2013 11:42:39 -0700

walinuxagent (1.3-0ubuntu1) raring; urgency=low

  * New upstream version (LP: #1101371)
    - Add some error checking and robustness to DVD mounting operation during
         provisioning
    - Remove redundant check for IP and Port in LoadBalancerProbe
    - Add check to self.computername to detect empty hostname in configuration
    - Fix manual uninstall on Ubuntu
  * Modified walinuxagent to recognize when its been packaged.

 -- Ben Howard <ben.howard@ubuntu.com>  Fri, 18 Jan 2013 15:43:08 -0700

walinuxagent (1.2-0ubuntu1) raring; urgency=low

  * New upstream version (LP: #1077148)
  * Upstream features:
    - Added - load ata_piix.ko module loaded if needed for CDROM device support
    - Additional logging for DoDhcpWork()
    - Update sock.recv timeout from 30 to 10 seconds
    - Fix: Linux waagent deprovision, user is not deleted properly
    - Fix: Make LBProbeResponder construction more robust
    - Fix: Agent fails to provision user with public/private key pairs
    - Fix: DHCP broadcast response not received
    - Fix: Linux agent fails to delete root user password
    - Fix: Linux agent should report error messages to Fabric when
           passed an invalid hostname.
  * Dropped Ubuntu specific patches
    - Removed debian/patches/000_resolv-conf.patch as upstream now supports
      resolvconf properly.
    - Removed debian/patches/001-strip-init-d.patch as redundant now that
      upstream understands Ubuntu upstart. Upstream script does not
      handle the removal of the upstart job anyway.
  * Added debian/patches/000_use_package_upstart.patch to use packaged
    upstart job over in-script upstart.

 -- Ben Howard <ben.howard@ubuntu.com>  Fri, 07 Dec 2012 16:52:42 -0700

walinuxagent (1.1-0ubuntu2) raring; urgency=low

  * Stop upgrades purging walinuxagent meta-data and configuration files
    (LP: #1079897):
    - d/{control,walinuxagent-data-saver.preinst}: Added
      walinuxagent-data-saver package to ensure that agent generated data is
      not lost on upgrade by diverting /usr/sbin/waagent during the upgrade
      process.
    - d/walinuxagent-data-saver.lintian-overrides: Override errors about use
      of dpkg-divert in this package.
    - d/control: Added Pre-Depends to walinuxagent on walinuxagent-data-saver.
    - d/prerm: Stop calling waagent --uninstall during reconfiguration
      and upgrade, specify files to remove manually for purge.
    - d/postinst: Remove divert of /usr/sbin/waagent prior to completion of
      package install.
  * d/preinst: If upgrading from package version with unmanaged waagent upstart
    configuration stop the agent and remove the upstart configuration.
  * d/upstart: Tidied description in upstart job.

 -- James Page <james.page@ubuntu.com>  Fri, 23 Nov 2012 16:07:41 +0000

walinuxagent (1.1-0ubuntu1) raring; urgency=low

  * New upstream version (LP: #1078074, #1077147).
  * Moved upstart job to be managed by packaging.

 -- Ben Howard <ben.howard@ubuntu.com>  Wed, 14 Nov 2012 10:59:37 -0700

walinuxagent (1.0~git20120606.c16f5e9-0ubuntu2) quantal; urgency=low

  * Restrict target architectures to i386 and amd64.

 -- James Page <james.page@ubuntu.com>  Mon, 06 Aug 2012 10:24:07 +0100

walinuxagent (1.0~git20120606.c16f5e9-0ubuntu1) quantal; urgency=low

  * Initial package import (LP: #1014864).
  * Ubuntu specific modifications:
    - Made resolvconf aware during deprovisioning
    - Added Ubuntu upstart job
    - Added ability to prevent agent startup.

 -- Ben Howard <ben.howard@ubuntu.com>  Fri, 22 Jun 2012 09:10:22 -0600
